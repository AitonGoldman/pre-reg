{"version":3,"sources":["../../src/pages/pay-pre-reg-fee/pay-pre-reg-fee.module.ts","../../src/pages/pay-pre-reg-fee/pay-pre-reg-fee.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PayPreRegFeePage } from './pay-pre-reg-fee';\n\n@NgModule({\n  declarations: [\n    PayPreRegFeePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PayPreRegFeePage),\n  ],\n})\nexport class PayPreRegFeePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pay-pre-reg-fee/pay-pre-reg-fee.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform } from 'ionic-angular';\nimport { PssApiProvider } from '../../providers/pss-api/pss-api';\nimport { PlayerModel, PlayerModelBuilder } from '../../models/PlayerModel'\n/**\n * Generated class for the PayPreRegFeePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\ndeclare var StripeCheckout: any;\n\n\n@IonicPage()\n@Component({\n  selector: 'page-pay-pre-reg-fee',\n  templateUrl: 'pay-pre-reg-fee.html',\n})\nexport class PayPreRegFeePage {\n    displayReturnMessage: boolean = false;\n    displayStripe: boolean = false;    \n    player: PlayerModel = null;    \n    stripePublicKey: string = null;    \n    loadingStripe = true;\n    stripeSuccess: boolean = false;\n    stripeFailure: boolean = false;\n    \n    constructor(public navCtrl: NavController,\n                public navParams: NavParams,                \n                public pssApi: PssApiProvider,\n                public platform: Platform) {\n    }\n        \n    ionViewDidEnter() {            \n        if(this.navParams.get('kosher')==undefined){          \n            this.navCtrl.push('HomePage');\n            return;\n        }\n        this.player = this.navParams.get('player');\n        this.stripePublicKey = this.navParams.get('stripePublicKey')\n        console.log(this.player);\n        this.launchStripe(this.navParams.get('tokenPurchaseId'),\"blah\");\n        // this.pssApi.getEvent('1').subscribe((results)=>{\n        //     this.stripePublicKey = results['data']['stripe_public_key'];\n        // this.launchStripe('ppp',\"blah\")\n        // })\n    }\n    \n    launchStripe(tokenPurchaseId, purchaseSummary){\n        \n        let handler = StripeCheckout.configure({\n            key: this.stripePublicKey,\n            image: 'https://stripe.com/img/documentation/checkout/marketplace.png',\n            locale: 'auto',\n            email: this.player.email_address,\n            allowRememberMe: false,\n            opened: ()=>{\n                this.loadingStripe=false;                \n            },\n            closed: ()=>{\n                if(this.stripeSuccess==false){\n                    this.displayReturnMessage=true;\n                }                                \n            },\n            \n            //            token: function(token) {\n            token : (token)=>{\n                this.stripeSuccess=true;\n                this.pssApi.completeTicketPurchase({stripe_token:token.id,email:token.email},1,tokenPurchaseId)\n                    .subscribe((results)=>{\n                        \n                        if(results != null){\n                            this.navCtrl.push('PreRegSummaryPage',{player:this.player,kosher:true});                                                    \n                        } else {\n                            this.navCtrl.push('HomePage');                                                                                \n                            return;\n                        }\n                        \n                    })                                                  \n\n                // You can access the token ID with `token.id`.\n                // Get the token ID to your server-side code for use.\n            }\n        });\n        handler.open({\n            name: 'Intergalactic Registration',            \n            zipCode: false,\n            amount: 100*20\n        });\n    }\n    \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pay-pre-reg-fee/pay-pre-reg-fee.ts"],"sourceRoot":""}